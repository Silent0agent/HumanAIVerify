{% extends "base.html" %}
{% load thumbnail %}
{% load i18n %}
{% load static %}

{% block content %}
  {% include "includes/tasks_header.html" %}
  <h2 class="text-center">{% translate "available_tasks" %}</h2>
  {% if available_tasks %}
    <table class="table table-hover">
      <thead>
        <tr>
          <th class="fw-medium">#</th>
          <th class="fw-medium">{% translate "Title" %}</th>
          <th class="fw-medium">{% translate "Content" %}</th>
          <th class="fw-medium">{% translate "created_at" %}</th>
          <th class="fw-medium">{% translate "Action" %}</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        {% for task in available_tasks %}
          <tr>
            <td class="align-middle">
              <span>{{ forloop.counter }}</span>
            </td>
            <td class="align-middle">
              <span>{{ task.title }}</span>
            </td>
            <td class="align-middle">
              {% block task_content %}{% endblock task_content %}
            </td>
            <td class="align-middle">{{ task.created_at|date:"d.m.Y" }}</td>
            <td class="align-middle">
              {% block available_task_title %}{% endblock available_task_title %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>{% block no_tasks %}{% endblock no_tasks %}</p>
  {% endif %}

  <h2 class="text-center">{% translate "completed_tasks" %}</h2>
  {% if completed_tasks %}
    <table class="table table-hover">
      <thead>
        <tr>
          <th class="fw-medium">#</th>
          <th class="fw-medium">{% translate "Client" %}</th>
          <th class="fw-medium">{% translate "Title" %}</th>
          <th class="fw-medium">{% translate "updated_at" %}</th>
          <th class="fw-medium">{% translate "AI_score" %}</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        {% for check in checks %}
          <tr>
            <td class="align-middle">
              <span>{{ forloop.counter }}</span>
            </td>
            <td class="align-middle">{{ check.task.client.username }}</td>
            <td class="align-middle">
              {% block completed_task_title %}{% endblock completed_task_title %}
            </td>
            <td class="align-middle">{{ check.task.updated_at|date:"d.m.Y" }}</td>
            <td class="align-middle">{{ check.task.ai_score }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-center">{% block no_checks %}{% endblock no_checks %}</p>
  {% endif %}
{% endblock content %}
